\section{Non ASCII Domains}
\label{sec:non_ascii_domains}
Goal of this section is to analyze the impact and relevance of non-ascii domain names.

Even though it is not mandatory to use only ascii characters, as far as the DNS protocol is
concerned, real implementations are limited to them.


\subsection{IDN, Internationalized Domain Names} % (fold)
\label{sub:idn_internationalized_domain_names}

% subsection idn_internationalized_domain_names (end)


\subsection{Punycode} % (fold)
\label{sub:punycode}
Punycode is an encoding syntax designed for use with Internationalized Domain Names in
Applications, specified in \cite{idna_protocol}. It is a special instance of Bootstring,
an algorithm designed to allow strings composed of characters from a small set to uniquely
represent strings drawing characters from a larger one. It features:
\begin{description}
  \item[Completeness] Every extended string can be represented by a basic string
    \cite{idna_protocol}.
  \item[Uniqueness] A string from the larger subset is represented by at most one string
    from the smaller subset.
  \item[Reversibility] Any extended string mapped to a basic string can be recovered from
    that basic string \cite{idna_protocol}.
  \item[Efficient Encoding] The string from the smaller set is usually quite shorter than the
    other.
  \item[Simplicity] The encoding and decoding algorithms are quite simple to be implement.
\end{description}

Essentially it is a simple and efficient way to map UTF-8 strings to ASCII strings, in a fashion
that guarantees all of the above properties. Every punycode domain starts with the \verb+xn--+
prefix.
% subsection punycode (end)



\subsection{Data Analysis} % (fold)
\label{sub:data_analysis}

We decided to investigate the previously obtained data, to establish the impact of non-ascii
domain names on the whole dataset. Schavoni \emph{et al.} collected $608,958,044$ packets,
from 12 Jan 2013 18:19:57 until Fri, 15 Mar 2013 23:37:11 GMT. Using a rather simple Python
script we gathered those DNS packets with a domain name containing the substring ``xn--'', which
is the sequence of characters identifying a punycode string.

We collected $41,474$ of these packets, roughly representing the $0.006\%$ of the whole dataset.
Even though the numbers would label this phenomenon as statistically irrelevant, we wanted to
lead further investigations. Clustering by TLDs, a first bar chart visualization was
produced, as shown in Figure~\ref{float:punycode_data}. As expected the vast majority of domain
names ($47\%$) feature a .com TLD. The NX data represent non existent top level domains. By
manual investigation of these particular values, we noticed that they usually are misspelled
real sites, e.g. facebookâ€¢com.




\begin{table}[h!tp]
\centering
  \begin{tabular}{lp{14cm}}
    \toprule
    RFC & Topic \\
    \midrule
    3492 & Punycode: A Bootstring encoding of Unicode
       for Internationalized Domain Names in Applications (IDNA), March 2003 \\
    5891 & Internationalized Domain Names in Applications (IDNA): Protocol, August 2010 \\
    5890 & Internationalized Domain Names for Applications (IDNA): Definitions and Document, Framework, August 2010 \\
    2181 &  Clarifications to the DNS Specification, 1997 \\
    \bottomrule
  \end{tabular}
\end{table}



\begin{figure}[h!tp]
  \begin{subfigure}[m]{.5\textwidth}
  \centering
    \begin{tikzpicture}
      \begin{axis}[
        ylabel=Number of Requests,
        x tick label style={text height=1.5ex},
        xlabel=TLDs,
        xticklabels from table={../data/tlds.csv}{names},
        xtick=data,
        ymin=0,
        axis background/.style={fill=gray!10}],
        major x tick style = transparent
        ]
        \addplot[ybar, fill] table[
          y=count,
          x expr=\coordindex,
          restrict y to domain=130:inf
        ] {../data/tlds.csv};
      \end{axis}
    \end{tikzpicture}
    \caption{Histogram representation.}
  \end{subfigure}
~
  \begin{subtable}[m]{.5\textwidth}
  \centering
    \pgfplotstabletypeset[
      columns/names/.style={string type, column name=TLDs},
      columns/count/.style={column name=Count, dec sep align},
      columns/percentage/.style={column name=$\%$, dec sep align},
      every even row/.style={
      before row={\rowcolor[gray]{0.9}}},
      every head row/.style={
        before row=\toprule,after row=\midrule},
      every last row/.style={
        after row=\bottomrule},]
      {../data/tlds.csv}
  \caption{Tabular representation}
  \end{subtable}
  \caption{$82\%$ of punycode data.}
  \label{float:punycode_data}
\end{figure}

\begin{table}[h!tp]
  \begin{tabular}{ll}
  \toprule
    Total Records      & 608,958,044 \\
    Punycode Records   & 41,474 \\
    End of Recording   & Fri, 15 Mar 2013 23:37:11 GMT \\
    Begin of Recording & Sat, 12 Jan 2013 18:19:57 GMT \\
  \midrule
  \end{tabular}
\end{table}

% subsection data_analysis (end)
% section punycode (end)

